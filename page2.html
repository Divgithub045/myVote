<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>

h2 {
  margin-top: 0;
  position:relative;
  left:0;
  margin-left: 10px;
  font-weight: bold;
}


    </style>
</head>
<body>
    <header>
        <h1 >myVote.com</h1>
        <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Cast my vote</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#upcomingEvent">UpcomingVoting</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">Disabled</a>
            </li>
          </ul>
     </header>
     <hr>
     <section class="LiveEvent">
        <h2 style="text-align:left">Live Events</h2>
        <hr>
        <div class="tab">
          <div class="tabInner">
            <h3>Vote for GDSC Head </h3>
            <em>live</em> <br>
            vote casted till now
            <div class="progress"style="background-color:#afafaf" >
                <div class="progress-bar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
              </div>  
              <br>
              <button type="button" class="btn btn-primary mb-3" onclick="reroute_final(event)">Cast My Vote </button>
          </div>
        </div>
        <div class="tab">
            <div class="tabInner">
                <h3>Dummy Vote </h3>
            <em>live</em> <br>
            vote casted till now
            <div class="progress"style="background-color:#afafaf;" >
                <div class="progress-bar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">75%</div>
              </div>  
              <br>
              <button type="button" class="btn btn-primary mb-3"onclick="reroute_final(event)">Cast My Vote </button>
            </div>
        </div>
     </section>
     <section id="upcomingEvent">
        <h2 style="text-align:left">Upcoming Events</h2> <hr>
        <div class="tab">
            <div class="tabInner">
              <h3>College General Election</h3>
              TimeLeft :<span id="timer1"></span><br><br><br>
              <button disabled>Cast My Vote</button>
            </div>
        </div>
        <div class="tab">
          <div class="tabInner">
            <h3>GDSC Internal Survey</h3>
            TimeLeft :<span id="timer2"></span><br><br><br>
            <button disabled>Cast My Vote</button>
          </div>
      </div>
      <div class="tab">
        <div class="tabInner">
          <h3>Surprise Survey</h3>
          TimeLeft :<span id="timer3"></span><br><br><br>
          <button disabled>Cast My Vote</button>
        </div>
    </div>
    
     </section>
     
     <script>
      
      document.addEventListener("DOMContentLoaded", function() {
        const pollTitle = localStorage.getItem("pollTitle");
        
        if (pollTitle) {
            document.querySelectorAll(".LiveEvent .tab h3")[1].innerHTML = pollTitle;
        }
        localStorage.removeItem('pollTitle');

    });
    
      function startCountdown(targetDate, timerId, buttonId) {
          
          function updateTimer() {
              const now = new Date().getTime();
              const timeLeft = targetDate - now;
  
              
              const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
              const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
              const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
  
              
              document.getElementById(timerId).textContent =
                  days + "d " + hours + "h " + minutes + "m " + seconds + "s";
  
            
              if (timeLeft < 0) {
                  clearInterval(timerInterval);
                  document.getElementById(timerId).textContent = "Event has started!";
                  document.getElementById(buttonId).disabled = false;
              }
          }
  
          
          const timerInterval = setInterval(updateTimer, 1000);
  
          
          updateTimer();
      }
  
      
      const eventDate1 = new Date();
      eventDate1.setDate(eventDate1.getDate() + 2);
      eventDate1.setHours(eventDate1.getHours() + 12);
      eventDate1.setMinutes(eventDate1.getMinutes() + 15);
  
      const eventDate2 = new Date();
      eventDate2.setDate(eventDate2.getDate() + 1); // 1 day from now
      eventDate2.setHours(eventDate2.getHours() + 5);
      eventDate2.setMinutes(eventDate2.getMinutes() + 30);
  
      const eventDate3 = new Date();
      eventDate3.setDate(eventDate3.getDate() + 3); // 3 days from now
      eventDate3.setHours(eventDate3.getHours() + 8);
      eventDate3.setMinutes(eventDate3.getMinutes() + 45);
  
      startCountdown(eventDate1, "timer1", "button1");
      startCountdown(eventDate2, "timer2", "button2");
      startCountdown(eventDate3, "timer3", "button3");
      function reroute_final(event) {
        const tabElement = event.target.closest('.tab');
        const h3Element = tabElement.querySelector('h3');
    
        if (h3Element) {
            const h3Text = h3Element.textContent;
            localStorage.setItem('h3Value', h3Text);
        }
        location.href = "page4.html";
    }
    
    
  </script>
  
</body>
</html>